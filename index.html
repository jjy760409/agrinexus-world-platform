
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>AgriNexus NFT + TTS + Firebase Platform</title>
  <script src="https://cdn.jsdelivr.net/npm/web3@latest/dist/web3.min.js"></script>
  <style>
    body { font-family: Arial; padding: 2rem; background: #f4f4f4; text-align: center; }
    textarea, input, button { width: 100%; padding: 1rem; margin: 0.5rem 0; border-radius: 6px; border: 1px solid #ccc; font-size: 1rem; }
    button { background: #007c4d; color: white; border: none; cursor: pointer; }
  </style>
</head>
<body>

  <h1>🌐 AgriNexus 계약 NFT + 음성 안내 + Firebase 배포 플랫폼</h1>

  <textarea id="contractText" placeholder="계약 내용을 입력하세요..." rows="6"></textarea>
  <input id="recipient" placeholder="NFT 발행 대상 주소 (0x...)" />
  <button onclick="mintNFT()">🪙 NFT 발행 (Polygon)</button>
  <button onclick="playVoice()">🔊 AI 음성으로 안내</button>

  <div id="result" style="margin-top:2rem;"></div>

  <script>
    async function mintNFT() {
      const recipient = document.getElementById("recipient").value;
      const contractText = document.getElementById("contractText").value;
      const web3 = new Web3(window.ethereum);
      await window.ethereum.request({ method: 'eth_requestAccounts' });
      const accounts = await web3.eth.getAccounts();
      const from = accounts[0];

      const contract = new web3.eth.Contract(
        [{"inputs":[{"internalType":"string","name":"uri","type":"string"},{"internalType":"address","name":"to","type":"address"}],"name":"mintNFT","outputs":[],"stateMutability":"nonpayable","type":"function"}],
        "YOUR_CONTRACT_ADDRESS"
      );

      try {
        const uri = "https://your-nft-storage.com/meta/" + Date.now();
        await contract.methods.mintNFT(uri, recipient).send({ from });
        document.getElementById("result").innerText = "✅ NFT 발행 완료!";
      } catch (err) {
        console.error(err);
        document.getElementById("result").innerText = "❌ NFT 발행 실패!";
      }
    }

    function playVoice() {
      const contract = document.getElementById("contractText").value;
      const voice = new SpeechSynthesisUtterance(contract);
      voice.lang = "ko-KR";
      voice.pitch = 1;
      voice.rate = 1;
      voice.voice = speechSynthesis.getVoices().find(v => v.lang.includes('ko'));
      speechSynthesis.speak(voice);
    }
  </script>

</body>
</html>
