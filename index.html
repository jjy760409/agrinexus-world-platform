
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <title>AgriNexus ê³„ì•½ í…œí”Œë¦¿ + ì „ìì„œëª… ì´ë¯¸ì§€</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <style>
    body { font-family: Arial; background: #f5f5f5; padding: 2rem; }
    input, textarea, select, button { width: 100%; padding: 0.8rem; margin-top: 1rem; font-size: 1rem; border-radius: 6px; border: 1px solid #ccc; }
    button { background: #007c4d; color: white; border: none; cursor: pointer; }
    label { margin-top: 1rem; display: block; font-weight: bold; }
    canvas { display: block; margin-top: 1rem; border: 1px solid #ccc; }
  </style>
</head>
<body>
  <h1>ğŸ“„ AgriNexus ê³„ì•½ ìƒì„±ê¸° (í…œí”Œë¦¿ + ë¡œê³  + ì„œëª… ì´ë¯¸ì§€)</h1>

  <label>â‘  ê³„ì•½ í…œí”Œë¦¿ ì„ íƒ</label>
  <select id="template">
    <option value="general">ì¼ë°˜ ê³„ì•½</option>
    <option value="supply">ê³µê¸‰ ê³„ì•½</option>
    <option value="installation">ì„¤ì¹˜ ê³„ì•½</option>
  </select>

  <label>â‘¡ ê³„ì•½ ë‹¹ì‚¬ì</label>
  <input id="partyA" placeholder="ê³„ì•½ ë‹¹ì‚¬ì A" />
  <input id="partyB" placeholder="ê³„ì•½ ë‹¹ì‚¬ì B" />

  <label>â‘¢ ê³„ì•½ ì¡°ê±´ ë° ë‚´ìš©</label>
  <textarea id="terms" placeholder="ê³„ì•½ ì£¼ìš” ë‚´ìš© ìš”ì•½ (GPT ìë™ ìƒì„±ë¨)" rows="3"></textarea>

  <label>â‘£ ì§ì ‘ ì…ë ¥ í•­ëª© (ì˜ˆ: ì£¼ì†Œ, ì—°ë½ì²˜ ë“±)</label>
  <textarea id="custom" placeholder="ì§ì ‘ ì‘ì„± í•­ëª© ì¶”ê°€..." rows="2"></textarea>

  <label>â‘¤ íŠ¹ì•½ ì‚¬í•­ ì…ë ¥</label>
  <textarea id="clause" placeholder="íŠ¹ì•½ ë˜ëŠ” ë³„ë„ ì¡°ê±´ ì…ë ¥..." rows="2"></textarea>

  <label>â‘¥ ê³„ì•½ì¼ì</label>
  <input id="date" type="date" />

  <label>â‘¦ ì „ìì„œëª… (ê·¸ë¦¼ìœ¼ë¡œ ê·¸ë¦¬ê¸°)</label>
  <canvas id="signCanvas" width="300" height="100"></canvas>
  <button onclick="clearCanvas()">ğŸ§¼ ì„œëª… ì§€ìš°ê¸°</button>

  <button onclick="generatePDF()">ğŸ“¥ ê³„ì•½ì„œ PDF ìƒì„±</button>

  <script>
    const canvas = document.getElementById("signCanvas");
    const ctx = canvas.getContext("2d");
    let drawing = false;

    canvas.onmousedown = () => drawing = true;
    canvas.onmouseup = () => drawing = false;
    canvas.onmousemove = e => {
      if (!drawing) return;
      const rect = canvas.getBoundingClientRect();
      ctx.lineTo(e.clientX - rect.left, e.clientY - rect.top);
      ctx.stroke();
    };

    function clearCanvas() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
    }

    async function generatePDF() {
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();

      const template = document.getElementById("template").value;
      const a = document.getElementById("partyA").value;
      const b = document.getElementById("partyB").value;
      const t = document.getElementById("terms").value;
      const c = document.getElementById("custom").value;
      const s = document.getElementById("clause").value;
      const d = document.getElementById("date").value;

      const templates = {
        general: "ë³¸ ê³„ì•½ì€ ë‹¤ìŒ ì¡°ê±´ì— ë”°ë¼ ì–‘ ë‹¹ì‚¬ì ê°„ ì²´ê²°ë©ë‹ˆë‹¤.",
        supply: "ê³µê¸‰ ê³„ì•½ì— ë”°ë¼ AëŠ” Bì—ê²Œ ë‹¤ìŒ ì¡°ê±´ìœ¼ë¡œ ìƒí’ˆ ë˜ëŠ” ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•©ë‹ˆë‹¤.",
        installation: "ì„¤ì¹˜ ê³„ì•½ì— ë”°ë¼ BëŠ” Aì˜ ìš”ì²­ì— ë”°ë¼ ë‹¤ìŒ ì¡°ê±´ìœ¼ë¡œ ì„¤ì¹˜ë¥¼ ì§„í–‰í•©ë‹ˆë‹¤."
      };

      const content = `
AgriNexus ê³„ì•½ì„œ (${template})

ê³„ì•½ì¼ì: ${d}

ê³„ì•½ ë‹¹ì‚¬ì:
 - A: ${a}
 - B: ${b}

[ê³„ì•½ ë‚´ìš©]
${templates[template]}

${t}

[ì§ì ‘ ì…ë ¥ í•­ëª©]
${c}

[íŠ¹ì•½ ì‚¬í•­]
${s}

ì „ìì„œëª…:
`;

      doc.setFontSize(12);
      doc.addImage('https://agrinexus.world/logo.png', 'PNG', 150, 10, 40, 20);
      doc.text(content, 20, 40);

      const imgData = canvas.toDataURL("image/png");
      doc.addImage(imgData, 'PNG', 20, 230, 100, 30);

      doc.save("AgriNexus_Contract_Templated.pdf");
    }
  </script>
</body>
</html>
