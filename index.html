
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>AgriNexus World | 실사용 플랫폼 SPA</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
  <style>
    html { scroll-behavior: smooth; }
    .tab { display: none; }
    .tab.active { display: block; }
  </style>
</head>
<body class="bg-white text-gray-800 font-sans">

<header class="bg-green-700 text-white text-center py-6">
  <h1 class="text-3xl font-bold">AgriNexus World</h1>
  <p class="text-sm">실사용 기능 포함 | 자동화 기반 플랫폼 | Netlify 배포 가능</p>
</header>

<main class="max-w-5xl mx-auto p-6 text-sm">
  <nav class="flex justify-center gap-2 mb-6 flex-wrap">
    <button onclick="showTab('contract')" class="bg-green-100 px-4 py-2 rounded">📄 계약</button>
    <button onclick="showTab('design')" class="bg-purple-100 px-4 py-2 rounded">🤖 설계</button>
    <button onclick="showTab('report')" class="bg-pink-100 px-4 py-2 rounded">📊 리포트</button>
  </nav>

  <!-- 계약 -->
  <section id="contract" class="tab active">
    <h2 class="text-xl font-bold mb-2">📄 계약 생성</h2>
    <input id="cName" placeholder="계약자 이름" class="border p-2 rounded w-full mb-2"/>
    <textarea id="cText" placeholder="계약 내용 입력" rows="4" class="border p-2 rounded w-full mb-2"></textarea>
    <button onclick="downloadContract()" class="bg-green-600 text-white px-4 py-2 rounded">📄 PDF 다운로드</button>
    <div id="cPreview" class="mt-4 p-4 border bg-white rounded hidden">
      <h3 class="font-bold">[계약서]</h3>
      <p><strong>계약자:</strong> <span id="cOutName"></span></p>
      <p class="mt-2 whitespace-pre-wrap" id="cOutText"></p>
    </div>
  </section>

  <!-- 설계 -->
  <section id="design" class="tab">
    <h2 class="text-xl font-bold mb-2">🤖 설계 시뮬레이션</h2>
    <input id="dArea" placeholder="설계 지역" class="border p-2 rounded w-full mb-2"/>
    <select id="dType" class="border p-2 rounded w-full mb-2">
      <option>복합형 온실</option>
      <option>태양광 연계형</option>
      <option>수경재배 시스템</option>
    </select>
    <button onclick="showDesign()" class="bg-purple-600 text-white px-4 py-2 rounded">설계 결과 생성</button>
    <p id="dResult" class="mt-4 text-purple-700 font-medium"></p>
  </section>

  <!-- 리포트 -->
  <section id="report" class="tab">
    <h2 class="text-xl font-bold mb-2">📊 ROI 계산 리포트</h2>
    <input id="rAmount" type="number" placeholder="투자금(만원)" class="border p-2 rounded w-full mb-2"/>
    <button onclick="showROI()" class="bg-pink-600 text-white px-4 py-2 rounded">ROI 계산 + PDF</button>
    <div id="rBox" class="mt-4 hidden border p-4 bg-white rounded">
      <p id="rResult" class="text-pink-700 font-medium"></p>
    </div>
  </section>
</main>

<footer class="bg-gray-100 text-center text-sm text-gray-600 py-6 mt-6">
  © 2025 AgriNexus World — 실사용 운영 플랫폼
</footer>

<script>
  function showTab(id) {
    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
    document.getElementById(id).classList.add('active');
  }

  function downloadContract() {
    const name = document.getElementById('cName').value;
    const text = document.getElementById('cText').value;
    document.getElementById('cOutName').innerText = name;
    document.getElementById('cOutText').innerText = text;
    const view = document.getElementById('cPreview');
    view.classList.remove('hidden');
    html2pdf().set({ filename: `계약서_${name}.pdf` }).from(view).save();
  }

  function showDesign() {
    const area = document.getElementById('dArea').value;
    const type = document.getElementById('dType').value;
    document.getElementById('dResult').innerText = `📍 ${area} 지역에는 ${type} 설비가 최적화됩니다.`;
  }

  function showROI() {
    const amt = parseFloat(document.getElementById('rAmount').value);
    const roi = (amt * 1.45).toLocaleString();
    document.getElementById('rResult').innerText = `📈 예상 ROI는 약 ${roi}만원입니다.`;
    document.getElementById('rBox').classList.remove('hidden');
    html2pdf().set({ filename: "ROI_리포트.pdf" }).from(document.getElementById('rBox')).save();
  }
</script>

</body>
</html>
