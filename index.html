
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>AgriNexus AI 계약 NFT 플랫폼</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <style>
    body { font-family: Arial; background: #f8f8f8; padding: 2rem; text-align: center; }
    img { width: 200px; margin: 1rem auto; }
    textarea, input, button { width: 100%; padding: 1rem; font-size: 1rem; margin: 0.5rem 0; border-radius: 6px; border: 1px solid #ccc; }
    button { background-color: #007c4d; color: white; border: none; cursor: pointer; }
  </style>
</head>
<body>

  <h1>📄 AgriNexus AI 계약 NFT 플랫폼</h1>
  <img src="logo.png" alt="로고" />
  <textarea id="contractText" rows="6" placeholder="계약서 내용을 입력하세요..."></textarea>
  <input type="text" id="recipient" placeholder="계약서 수신자 이메일 주소" />
  <button onclick="createPDF()">📥 계약서 PDF 생성 + NFT 카드 시각화</button>

  <div id="output" style="margin-top:2rem;"></div>

  <script>
    const { jsPDF } = window.jspdf;

    async function createPDF() {
      const text = document.getElementById("contractText").value;
      const recipient = document.getElementById("recipient").value;
      const doc = new jsPDF();

      // 로고
      const logoImg = new Image();
      logoImg.src = "logo.png";

      // 캐릭터
      const charImg = new Image();
      charImg.src = "ai_character.png";

      logoImg.onload = () => {
        doc.addImage(logoImg, "PNG", 150, 10, 40, 20);
        charImg.onload = () => {
          doc.addImage(charImg, "PNG", 10, 260, 30, 30);
          doc.setFontSize(12);
          doc.text("AgriNexus 계약서", 20, 30);
          doc.text(`수신자: ${recipient}`, 20, 40);
          const lines = doc.splitTextToSize(text, 170);
          doc.text(lines, 20, 50);
          doc.save("AgriNexus_Contract_with_Logo.pdf");
        };
      };

      // NFT 시각화 카드
      const nftCard = `
        <div style="border:2px solid #007c4d; padding:1rem; background:#fff; border-radius:10px; max-width:400px; margin:1rem auto;">
          <img src="ai_character.png" style="width:80px;"><br/>
          <strong>📄 계약 NFT</strong><br/>
          수신자: ${recipient}<br/>
          고유번호: AGX-${Date.now().toString().slice(-6)}<br/>
          <small>시각화 전용 카드로 블록체인 발행 가능</small>
        </div>
      `;
      document.getElementById("output").innerHTML = nftCard;

      // 캐릭터 음성 출력
      const voice = new SpeechSynthesisUtterance(`AgriNexus 계약서가 생성되었습니다. 수신자는 ${recipient}입니다.`);
      voice.lang = "ko-KR";
      speechSynthesis.speak(voice);
    }
  </script>

</body>
</html>
