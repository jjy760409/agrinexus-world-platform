
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <title>AgriNexus ì„œëª… í¬í•¨ ê³„ì•½ PDF ìƒì„±</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <style>
    body { font-family: Arial; padding: 2rem; background: #f4f4f4; }
    input, textarea, button { width: 100%; padding: 0.8rem; margin-top: 1rem; font-size: 1rem; border-radius: 6px; border: 1px solid #ccc; }
    button { background: #007c4d; color: white; border: none; cursor: pointer; }
    h2 { color: #004b8d; margin-top: 2rem; }
    img { margin-top: 1rem; border: 1px solid #ccc; max-width: 300px; }
  </style>
</head>
<body>
  <h1>ğŸ“„ AgriNexus ì„œëª… í¬í•¨ ê³„ì•½ì„œ PDF ìƒì„±ê¸°</h1>

  <h2>â‘  ê³„ì•½ ë‚´ìš© ì…ë ¥</h2>
  <textarea id="contractText" rows="10" placeholder="GPT ë˜ëŠ” ì‚¬ìš©ìê°€ ìƒì„±í•œ ê³„ì•½ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”..."></textarea>

  <h2>â‘¡ ì„œëª… ì´ë¯¸ì§€ ì—…ë¡œë“œ</h2>
  <input type="file" id="signatureImage" accept="image/*"/>
  <img id="previewImage"/>

  <h2>â‘¢ PDF ìƒì„± ë° ë³‘í•©</h2>
  <button onclick="generateSignedPDF()">ğŸ“¥ ì„œëª… í¬í•¨ PDF ìƒì„±</button>

  <script>
    let uploadedSignature = null;

    document.getElementById("signatureImage").addEventListener("change", (e) => {
      const file = e.target.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = function(evt) {
          uploadedSignature = evt.target.result;
          document.getElementById("previewImage").src = uploadedSignature;
        };
        reader.readAsDataURL(file);
      }
    });

    async function generateSignedPDF() {
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();

      const text = document.getElementById("contractText").value;
      const lines = doc.splitTextToSize(text, 180);
      doc.text(lines, 15, 20);

      if (uploadedSignature) {
        doc.addImage(uploadedSignature, 'PNG', 15, 250, 80, 30);
        doc.text("ì„œëª…:", 15, 245);
      }

      doc.save("AgriNexus_Contract_Signed_Merged.pdf");
    }
  </script>
</body>
</html>
