
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>AgriNexus êµ­ê°€ë³„ ë‰´ìŠ¤ ê¸°ë°˜ ë³´ê³ ì„œ</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <style>
    body { font-family: 'Segoe UI', sans-serif; padding: 20px; }
    select, button { padding: 8px; margin-top: 10px; }
    .report { margin-top: 20px; border: 1px solid #ccc; padding: 15px; border-radius: 8px; background: #f9f9f9; }
  </style>
</head>
<body>
  <h1>ğŸ“° êµ­ê°€ë³„ ì •ì±… ë‰´ìŠ¤ ê¸°ë°˜ ìŠ¤ë§ˆíŠ¸ ë†ì—… ë³´ê³ ì„œ</h1>
  <label>êµ­ê°€ ì„ íƒ:
    <select id="country" onchange="loadNews(this.value)">
      <option value="">-- ì„ íƒ --</option>
      <option value="kr">ëŒ€í•œë¯¼êµ­</option>
      <option value="us">ë¯¸êµ­</option>
      <option value="jp">ì¼ë³¸</option>
      <option value="cn">ì¤‘êµ­</option>
      <option value="de">ë…ì¼</option>
      <option value="fr">í”„ë‘ìŠ¤</option>
    </select>
  </label>
  <div id="newsResult" class="report">êµ­ê°€ë¥¼ ì„ íƒí•˜ë©´ ë‰´ìŠ¤ ë¶„ì„ ë¦¬í¬íŠ¸ê°€ ìë™ ìƒì„±ë©ë‹ˆë‹¤.</div>
  <button onclick="generatePDF()">ğŸ“„ PDF ì €ì¥</button>

  <script>
    async function loadNews(code) {
      const resultBox = document.getElementById("newsResult");
      resultBox.innerHTML = "ğŸ” ë‰´ìŠ¤ ì¡°íšŒ ì¤‘...";

      const res = await fetch(`https://gnews.io/api/v4/search?q=agriculture+${code}&lang=ko&token=YOUR_GNEWS_API_KEY`);
      const data = await res.json();

      const article = data.articles[0];
      if (!article) {
        resultBox.innerHTML = "âŒ ê´€ë ¨ ë‰´ìŠ¤ê°€ ì—†ìŠµë‹ˆë‹¤.";
        return;
      }

      const summary = "ìš”ì•½ ì˜ˆì‹œ: " + article.title + " â†’ " + article.description;
      resultBox.innerHTML = `
        <h3>${article.title}</h3>
        <p>${article.description}</p>
        <p><b>ì¶œì²˜:</b> ${article.source.name} | <b>ë‚ ì§œ:</b> ${article.publishedAt}</p>
        <p><b>ìš”ì•½:</b> ${summary}</p>
      `;
    }

    function generatePDF() {
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();
      const text = document.getElementById("newsResult").innerText;
      doc.text(text, 10, 10);
      doc.save("agri_news_report.pdf");
    }
  </script>
</body>
</html>
